{"ast":null,"code":"var _jsxFileName = \"/Users/bazilahmad/Desktop/innocaption-project/frontend/src/components/ProductList.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Container, Row, Col, Card, Button, ListGroup } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\n\n// Assuming this is the function to fetch average rating\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst fetchAverageRating = async productId => {\n  try {\n    const reviewsResponse = await axios.get(`http://localhost:3000/api/reviews/${productId}`);\n    const reviews = reviewsResponse.data;\n    if (reviews.length === 0) return \"No reviews\";\n    const averageRating = reviews.reduce((acc, review) => acc + review.rating, 0) / reviews.length;\n    return averageRating.toFixed(1); // Returns the average rating to 1 decimal place\n  } catch (error) {\n    console.error(\"Error fetching reviews for product:\", productId, error);\n    return \"No reviews\"; // Return \"No reviews\" in case of error\n  }\n};\nfunction ProductList({\n  addToCart\n}) {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [ratings, setRatings] = useState({}); // Object to store ratings keyed by product ID\n\n  useEffect(() => {\n    const fetchProductsAndRatings = async () => {\n      try {\n        const response = await axios.get('https://dummyjson.com/products');\n        const fetchedProducts = response.data.products;\n        setProducts(fetchedProducts);\n\n        // Iterate over fetchedProducts to get ratings\n        const ratingPromises = fetchedProducts.map(async product => {\n          const rating = await fetchAverageRating(product.id);\n          return {\n            id: product.id,\n            rating\n          };\n        });\n\n        // Wait for all ratings to be fetched\n        const ratingsResults = await Promise.all(ratingPromises);\n        // Update state with fetched ratings\n        setRatings(ratingsResults.reduce((acc, {\n          id,\n          rating\n        }) => ({\n          ...acc,\n          [id]: rating\n        }), {}));\n      } catch (error) {\n        console.error(\"Error fetching products:\", error);\n      }\n    };\n    fetchProductsAndRatings();\n  }, []);\n  const ratingToStars = rating => {\n    if (rating === \"No reviews\") return rating; // Return text directly if there are no reviews\n    const fullStars = Math.round(rating);\n    const starsRepresentation = '★'.repeat(fullStars) + '☆'.repeat(5 - fullStars); // Assumes a 5-star system\n    return `${rating} (${starsRepresentation})`; // Combines numeric rating with stars\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"mt-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"mb-4\",\n      children: \"Our Products\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ListGroup, {\n      children: products.map(product => /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          className: \"align-items-center\",\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            md: 3,\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: `/products/${product.id}`,\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: product.thumbnail,\n                alt: product.title,\n                style: {\n                  width: '100%',\n                  height: 'auto',\n                  cursor: 'pointer'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            md: 6,\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: `/products/${product.id}`,\n              style: {\n                textDecoration: 'none',\n                color: 'inherit'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                children: product.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: product.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Average Rating: \", ratings[product.id] ? ratingToStars(ratings[product.id]) : \"No reviews\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 73,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            md: 3,\n            className: \"text-md-right\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-muted\",\n              children: [\"$\", product.price]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              onClick: e => {\n                e.stopPropagation();\n                addToCart(product);\n              },\n              children: \"Add to Cart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this)\n      }, product.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n_s(ProductList, \"9m3Gy31/cSnK3+UMLmgx+ObbF1Y=\");\n_c = ProductList;\nexport default ProductList;\nvar _c;\n$RefreshReg$(_c, \"ProductList\");","map":{"version":3,"names":["React","useState","useEffect","axios","Container","Row","Col","Card","Button","ListGroup","Link","jsxDEV","_jsxDEV","fetchAverageRating","productId","reviewsResponse","get","reviews","data","length","averageRating","reduce","acc","review","rating","toFixed","error","console","ProductList","addToCart","_s","products","setProducts","ratings","setRatings","fetchProductsAndRatings","response","fetchedProducts","ratingPromises","map","product","id","ratingsResults","Promise","all","ratingToStars","fullStars","Math","round","starsRepresentation","repeat","className","children","fileName","_jsxFileName","lineNumber","columnNumber","Item","md","to","src","thumbnail","alt","title","style","width","height","cursor","textDecoration","color","description","price","variant","onClick","e","stopPropagation","_c","$RefreshReg$"],"sources":["/Users/bazilahmad/Desktop/innocaption-project/frontend/src/components/ProductList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Container, Row, Col, Card, Button, ListGroup } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\n\n// Assuming this is the function to fetch average rating\nconst fetchAverageRating = async (productId) => {\n  try {\n    const reviewsResponse = await axios.get(`http://localhost:3000/api/reviews/${productId}`);\n    const reviews = reviewsResponse.data;\n    if(reviews.length === 0) return \"No reviews\";\n    const averageRating = reviews.reduce((acc, review) => acc + review.rating, 0) / reviews.length;\n    return averageRating.toFixed(1); // Returns the average rating to 1 decimal place\n  } catch (error) {\n    console.error(\"Error fetching reviews for product:\", productId, error);\n    return \"No reviews\"; // Return \"No reviews\" in case of error\n  }\n};\n\nfunction ProductList({ addToCart }) {\n  const [products, setProducts] = useState([]);\n  const [ratings, setRatings] = useState({}); // Object to store ratings keyed by product ID\n\n  useEffect(() => {\n    const fetchProductsAndRatings = async () => {\n      try {\n        const response = await axios.get('https://dummyjson.com/products');\n        const fetchedProducts = response.data.products;\n        setProducts(fetchedProducts);\n\n        // Iterate over fetchedProducts to get ratings\n        const ratingPromises = fetchedProducts.map(async (product) => {\n          const rating = await fetchAverageRating(product.id);\n          return { id: product.id, rating };\n        });\n\n        // Wait for all ratings to be fetched\n        const ratingsResults = await Promise.all(ratingPromises);\n        // Update state with fetched ratings\n        setRatings(ratingsResults.reduce((acc, {id, rating}) => ({...acc, [id]: rating}), {}));\n      } catch (error) {\n        console.error(\"Error fetching products:\", error);\n      }\n    };\n\n    fetchProductsAndRatings();\n  }, []);\n\n  const ratingToStars = (rating) => {\n    if (rating === \"No reviews\") return rating; // Return text directly if there are no reviews\n    const fullStars = Math.round(rating);\n    const starsRepresentation = '★'.repeat(fullStars) + '☆'.repeat(5 - fullStars); // Assumes a 5-star system\n    return `${rating} (${starsRepresentation})`; // Combines numeric rating with stars\n  };\n\n  return (\n    <Container className=\"mt-4\">\n      <h2 className=\"mb-4\">Our Products</h2>\n      <ListGroup>\n        {products.map((product) => (\n          <ListGroup.Item key={product.id} className=\"mb-3\">\n            <Row className=\"align-items-center\">\n              <Col md={3}>\n                <Link to={`/products/${product.id}`}>\n                  <img src={product.thumbnail} alt={product.title} style={{ width: '100%', height: 'auto', cursor: 'pointer' }} />\n                </Link>\n              </Col>\n              <Col md={6}>\n                <Link to={`/products/${product.id}`} style={{ textDecoration: 'none', color: 'inherit' }}>\n                  <h5>{product.title}</h5>\n                  <p>{product.description}</p>\n                  {/* Display average rating with stars */}\n                  <p>Average Rating: {ratings[product.id] ? ratingToStars(ratings[product.id]) : \"No reviews\"}</p>\n                </Link>\n              </Col>\n              <Col md={3} className=\"text-md-right\">\n                <p className=\"text-muted\">${product.price}</p>\n                <Button variant=\"primary\" onClick={(e) => {e.stopPropagation(); addToCart(product);}}>\n                  Add to Cart\n                </Button>\n              </Col>\n            </Row>\n          </ListGroup.Item>\n        ))}\n      </ListGroup>\n    </Container>\n  );\n}\n\nexport default ProductList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}